-- vim:set ft=lua:
dofile(mg.script_name:gsub('[^\\/]*$','')..'util.lua')

ct=[=[
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="default.css">
<title>EpgTimer</title>
</head>
<body>
<h1>メニュー</h1>
<div class="nav">
  <ul>
    <li><a href="reserve.html">予約一覧</a></li>
    <li><a href="recinfo.html">録画済み一覧</a></li>
    <li><a href="autoaddepg.html">EPG予約一覧</a></li>
    <li><a href="epg.html">番組表</a></li>
    <li><a href="epglist.html">リスト番組表</a></li>
    <!--<li><a href="addprogres.html">プログラム予約追加(必要なら自作してください)</a></li>-->
    <li><a href="notifylog.lua?c=8192">情報通知ログ</a></li>
    <li><a href="debuglog.lua?c=8192">デバッグ出力</a></li>
    <li><a href="]=]..PathToRoot()..[=[video/">/video/</a></li>
  </ul>
</div>
<div id="footer">
  <a href="about.html">このWebUIについて</a>
</div>
</body>
</html>
]=]
if not mg.request_info.uri:find('/$') and
   not mg.request_info.uri:lower():find('%.html$') then
  mg.write(Response(301, nil, nil, 0)..'Location: '..mg.request_info.uri..'/\r\n\r\n')
else
  mg.write(Response(200, 'text/html', 'utf-8', #ct)..'\r\n', ct)
end
